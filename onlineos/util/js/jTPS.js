var w3cookies={date:new Date(),create:function(c,d,a){if(a){this.date.setTime(this.date.getTime()+(a*24*60*60*1000));var b="; expires="+this.date.toGMTString()}else{var b=""}document.cookie=c+"="+d+b+"; path=/"},read:function(e){var a=e+"=";var d=document.cookie.split(";");for(var c=0,b;b=d[c];c++){while(b.charAt(0)==" "){b=b.substring(1,b.length)}if(b.indexOf(a)==0){return b.substring(a.length,b.length)}}return null},erase:function(a){this.create(a,"",-1)}};(function(a){a.fn.jTPS=function(b){a(this).data("tableSettings",a.extend({perPages:[5,10],perPageText:'<span id="showperpage">showperpage:</span>',perPageDelim:'<span style="color:#ccc;">|</span>',perPageSeperator:"..",scrollDelay:30,scrollStep:1,fixedLayout:true,clickCallback:function(){}},b));var h=a(this),d=d||1,m=a(this).data("tableSettings").perPages,v=v||m[0],j=a(".list table tbody tr").length;if(a(this).data("tableSettings").perPage>0){j=j/2}if(w3cookies.read("perPage")!=null&&v!=3){v=w3cookies.read("perPage")}a(this).addClass("jTPS");if(a(this).data("tableSettings").fixedLayout){if(a(this).css("table-layout")!="fixed"){var x=0;a(">thead",this).find("th,td").each(function(){a(this).css("width",a(this).width())});var i=a(">tbody",this)[0].childNodes,f=0;for(var e=0,t=i.length;e<t;e++){if(i[e].nodeName=="TR"){x=Math.max(x,i[e].offsetHeight)}}for(var e=0,t=i.length;e<t;e++){if(i[e].nodeName=="TR"){for(var w=0,u=i[e].childNodes,y=u.length;w<y;w++){if(u[w].nodeName=="TD"){u[w].style.height=x+"px";w=y}}}}a(this).css("table-layout","fixed")}}a(".stubCell",this).remove();var o=0,l=Math.max(a(">thead:first tr:last th,>thead:first tr:last td",this).length,parseInt(a(">thead:first tr:last th,>thead:first tr:last td").attr("colspan")||0)),s=(v-(a(">tbody>tr",this).length%v)),k=a(">tbody>tr:first>td:first",this).css("height");if(j>v&&v!=0){a(">tbody>tr:gt("+(v-1)+")",this).addClass("hideTR")}if(v!=0){a(">thead [sort],>thead .sort",this).each(function(z){a(this).addClass("sortableHeader").unbind("click").bind("click",function(){var A=a(">thead tr:last",h).children().index(a(this)),C=a(">thead [sort],>thead .sort",h).eq(A).hasClass("sortAsc")?true:false;r(h,A,C);var B=parseInt(a(".hilightPageSelector:first",h).html())||1;a(">tbody>tr",h).removeClass("hideTR").filter(":gt("+((v-1)*B)+")").addClass("hideTR");a(">tbody>tr:lt("+((v-1)*(B-1))+")",h).addClass("hideTR");if(a(".pageSelector",h).index(a(".hilightPageSelector",h))>0){a(".pageSelector:first",h).click()}a(">thead .sortDesc,>thead .sortAsc",h).removeClass("sortDesc").removeClass("sortAsc");a(">thead [sort],>thead .sort",h).eq(A).addClass(C?"sortDesc":"sortAsc");a(">tbody>tr>td.sortedColumn",h).removeClass("sortedColumn");a(">tbody>tr:not(.stubCell)",h).each(function(){a(">td:eq("+A+")",this).addClass("sortedColumn")});p();a(h).data("tableSettings").clickCallback()})})}a(">.nav .selectPerPage",this).empty();var c=m.length;while(c--){a(">.nav .selectPerPage",this).prepend(((c>0)?a(this).data("tableSettings").perPageDelim:"")+'<span class="perPageSelector">'+m[c]+"</span>")}q(this,d||1);a(">.nav .selectPerPage",this).prepend(a(this).data("tableSettings").perPageText).find(".perPageSelector").each(function(){if((parseInt(a(this).html())||j)==v){a(this).addClass("perPageSelected")}a(this).bind("mouseover mouseout",function(z){z.type=="mouseover"?a(this).addClass("perPageHilight"):a(this).removeClass("perPageHilight")});a(this).bind("click",function(){v=parseInt(a(this).html())||j;if(v>3){w3cookies.create("perPage",v,new Date().getTime()+(1*24*60*60*1000))}if(v>j){v=j}a(".stubCell",this).remove();var B=0,D=a(">thead th,>thead td",h).length,E=(v-(a(">tbody>tr",h).length%v)),A=a(">tbody>tr:first>td:first",h).css("height");a(">tbody>tr",h).removeClass("hideTR").filter(":gt("+((v-1)*d)+")").addClass("hideTR");a(">tbody>tr:lt("+((v-1)*(d-1))+")",h).addClass("hideTR");a(".pageSelector:first",h).click();a(this).siblings(".perPageSelected").removeClass("perPageSelected");a(this).addClass("perPageSelected");q(h,1);var C=a(">tbody>tr:not(.hideTR):first",h).prevAll().length,z=a(">tbody>tr:not(.hideTR):not(.stubCell)",h).length;if(C+z>0){a(">.nav .status",h).html(""+(C+1)+" - "+(C+z)+" of "+j+"")}p();a(h).data("tableSettings").clickCallback()});if(w3cookies.read("perPage")!=null){if(parseInt(w3cookies.read("perPage"))==parseInt(a(this).html())){a(this).trigger("click")}}});var g=a(">tbody>tr:not(.hideTR):first",this).prevAll().length,n=a(">tbody>tr:not(.hideTR):not(.stubCell)",this).length;if(g+n>0){a(">.nav .status",this).html(""+(g+1)+" - "+(g+n)+" of "+j)}function p(){if(document.selection&&typeof(document.selection.empty)!="undefined"){document.selection.empty()}else{if(typeof(window.getSelection)==="function"&&typeof(window.getSelection().removeAllRanges)==="function"){window.getSelection().removeAllRanges()}}}function q(D,C){a(">.nav .pagination",D).empty();var z=(v>=j||v==0)?0:Math.ceil(j/v),B=z;while(z--){a(">.nav .pagination",D).prepend('<div class="pageSelector">'+(z+1)+"</div>")}var A=a(">.nav:first .pageSelector",D).length;a(">.nav",D).each(function(){a(".hidePageSelector",this).removeClass("hidePageSelector");a(".hilightPageSelector",this).removeClass("hilightPageSelector");a(".pageSelectorSeperator",this).remove();a(".pageSelector:lt("+((C>(A-4))?(A-5):(C-2))+"):not(:first)",this).addClass("hidePageSelector").eq(0).after('<div class="pageSelectorSeperator">'+a(D).data("tableSettings").perPageSeperator+"</div>");a(".pageSelector:gt("+((C<4)?4:C)+"):not(:last)",this).addClass("hidePageSelector").eq(0).after('<div class="pageSelectorSeperator">'+a(D).data("tableSettings").perPageSeperator+"</div>");a(".pageSelector:eq("+(C-1)+")",this).addClass("hilightPageSelector")});if(v>=j){a(">.nav .paginationTitle",D).css("display","none")}else{a(">.nav .paginationTitle",D).css("display","")}a(">.nav .pagination .pageSelector",D).each(function(){a(this).bind("click",function(){if(a(this).hasClass("hilightPageSelector")){if(a(this).parent().queue().length>0){a(this).parent().stop().queue("fx",[]).stop();var H=((parseInt(a(this).html())-1)*v),I=H+v;a(">tbody> tr",h).removeClass("hideTR").addClass("hideTR");a(">tbody>tr:gt("+(H-2)+"):lt("+(v)+")",h).andSelf().removeClass("hideTR");var J=a(">tbody>tr:not(.hideTR):first",h).prevAll().length,F=a(">tbody>tr:not(.hideTR):not(.stubCell)",h).length;if(J+F>0){a(">.nav .status",h).html(""+(J+1)+" - "+(J+F)+" of "+j+"")}}p();return false}a(this).addClass("hilightPageSelector");a(this).parent().stop().queue("fx",[]).stop().dequeue();var H=a(">tbody>tr:not(.hideTR):first",h).prevAll().length,I=((parseInt(a(this).html())-1)*v);if(I>j){I=(j-1)}var E=a(h).data("tableSettings").scrollStep*Math.ceil(Math.abs((I-H)/v));if(E>v){E=v}var G=Math.ceil(Math.abs(H-I)/E);while(G--){a(this).parent().animate({opacity:1},a(h).data("tableSettings").scrollDelay,function(){if(a(this).queue("fx").length==0){E=(Math.abs(H-I)%E)||E}if(H>I){a(">tbody>tr:not(.hideTR):first",h).prevAll(":lt("+E+")").removeClass("hideTR");if(a(">tbody>tr:not(.hideTR)",h).length>v){a(">tbody>tr:not(.hideTR):last",h).prevAll(":lt("+(E-1)+")").andSelf().addClass("hideTR")}var L=a(">tbody>tr:not(.hideTR)",h).length;if(L<v){a(">tbody>tr:not(.hideTR):last",h).nextAll(":lt("+(v-L)+")").removeClass("hideTR")}}else{var M=a(">tbody>tr:not(.hideTR):last",h);a(">tbody>tr:not(.hideTR):lt("+E+")",h).addClass("hideTR");a(M).nextAll(":lt("+E+")").removeClass("hideTR")}var N=a(">tbody>tr:not(.hideTR):first",h).prevAll().length,K=a(">tbody>tr:not(.hideTR):not(.stubCell)",h).length;if(N+K>0){a(">.nav .status",h).html(""+(N+1)+" - "+(N+K)+" of "+j+"")}})}q(h,parseInt(a(this).html()));a(h).data("tableSettings").clickCallback()})});if(g+n==0){a(">.nav .status",D).addClass("nothing")}}function r(E,M,D){var G=a(">thead th,>thead th",E).get(M),F=a(G).hasClass("sortAsc")||a(G).hasClass("sortDesc")||false,N=String.fromCharCode(0),L=/([-]?[0-9\.]+)/g,O=a(">tbody>tr:not(.stubCell)",E).get(),C=[];a(O).each(function(P,Q){C.push(a(">td:eq("+M+")",Q).text()+N+C.length)});if(!F){C.sort(function A(V,T){var aa=/(-?[0-9\.]+)/g,X=String.fromCharCode(0),W=V.toString().toLowerCase().split(X)[0]||"",S=T.toString().toLowerCase().split(X)[0]||"",Y=W.replace(aa,X+"$1"+X).split(X),R=S.replace(aa,X+"$1"+X).split(X),Q=(new Date(W)).getTime(),Z=Q?(new Date(S)).getTime():null;if(Z){if(Q<Z){return -1}else{if(Q>Z){return 1}}}for(var U=0,P=Math.max(Y.length,R.length);U<P;U++){oFxNcL=parseFloat(Y[U])||Y[U];oFyNcL=parseFloat(R[U])||R[U];if(oFxNcL<oFyNcL){return -1}else{if(oFxNcL>oFyNcL){return 1}}}return 0});if(!D){C.reverse()}}a(">tbody",E).addClass("jtpstemp").before("<tbody></tbody>");var J=C.length,B=a(">tbody",E)[0];if(F){while(J--){B.appendChild(O[J])}}else{while(J--){B.appendChild(O[parseInt(C[J].split(N).pop())])}}a(">tbody.jtpstemp",E).remove();var K=0,I=a(">thead>tr:last th",E).length,z=(v-(a(">tbody>tr",E).length%v)),H=a(">tbody>tr:first>td:first",E).css("height")}return this}})(jQuery);